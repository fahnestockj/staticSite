<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Algorithimic Stock Trader | Fahnestockj</title>
<meta name="keywords" content="" />
<meta name="description" content="A Flawless Mean Reversion Strategy ðŸš€ Key Indicators ADX - Average Directional Index Used to determine a time window to trade BBands - Bollinger Bands Used to catch overextensions (positive or negative) inside a time window
if self.SlowADX &gt; self.FastADX: self.log(&#39;TRADENOWWEEWWOOOO&#39;) if self.dataclose[0] &lt; self.BBands.bot: self.log(&#39;Buy Create, %.2f&#39; %self.dataclose[0]) self.buy() if self.position.size &lt; 0: self.buy(size = abs(self.position.size)) self.log(&#39;Short closed: %.2f&#39; %self.dataclose[0]) self.buy(size = self.position.size) if self.dataclose[0] &gt; self.BBands.top: self.log(&#39;Sell Created, %.">
<meta name="author" content="">
<link rel="canonical" href="https://fahnestockj.com/projects/stonks/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.c88963fe2d79462000fd0fb1b3737783c32855d340583e4523343f8735c787f0.css" integrity="sha256-yIlj/i15RiAA/Q&#43;xs3N3g8MoVdNAWD5FIzQ/hzXHh/A=" rel="preload stylesheet" as="style">
<script defer crossorigin="anonymous" src="/assets/js/highlight.min.e85ad0406048e8176e1c7661b25d5c69297ddfe41dc4124cf75ecb99a4f7b3d1.js" integrity="sha256-6FrQQGBI6BduHHZhsl1caSl93&#43;QdxBJM917LmaT3s9E="
    onload="hljs.initHighlightingOnLoad();"></script>
<link rel="icon" href="https://fahnestockj.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://fahnestockj.com/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://fahnestockj.com/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://fahnestockj.com/apple-touch-icon.png">
<link rel="mask-icon" href="https://fahnestockj.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<meta name="generator" content="Hugo 0.101.0" />
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-215231859-1', 'auto');
	
	ga('send', 'pageview');
}
</script><meta property="og:title" content="Algorithimic Stock Trader" />
<meta property="og:description" content="A Flawless Mean Reversion Strategy ðŸš€ Key Indicators ADX - Average Directional Index Used to determine a time window to trade BBands - Bollinger Bands Used to catch overextensions (positive or negative) inside a time window
if self.SlowADX &gt; self.FastADX: self.log(&#39;TRADENOWWEEWWOOOO&#39;) if self.dataclose[0] &lt; self.BBands.bot: self.log(&#39;Buy Create, %.2f&#39; %self.dataclose[0]) self.buy() if self.position.size &lt; 0: self.buy(size = abs(self.position.size)) self.log(&#39;Short closed: %.2f&#39; %self.dataclose[0]) self.buy(size = self.position.size) if self.dataclose[0] &gt; self.BBands.top: self.log(&#39;Sell Created, %." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://fahnestockj.com/projects/stonks/" /><meta property="og:image" content="https://fahnestockj.com/papermod-cover.png"/><meta property="article:section" content="projects" />
<meta property="article:published_time" content="2021-05-13T12:19:53-04:00" />
<meta property="article:modified_time" content="2021-05-13T12:19:53-04:00" />

<meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="https://fahnestockj.com/papermod-cover.png"/>

<meta name="twitter:title" content="Algorithimic Stock Trader"/>
<meta name="twitter:description" content="A Flawless Mean Reversion Strategy ðŸš€ Key Indicators ADX - Average Directional Index Used to determine a time window to trade BBands - Bollinger Bands Used to catch overextensions (positive or negative) inside a time window
if self.SlowADX &gt; self.FastADX: self.log(&#39;TRADENOWWEEWWOOOO&#39;) if self.dataclose[0] &lt; self.BBands.bot: self.log(&#39;Buy Create, %.2f&#39; %self.dataclose[0]) self.buy() if self.position.size &lt; 0: self.buy(size = abs(self.position.size)) self.log(&#39;Short closed: %.2f&#39; %self.dataclose[0]) self.buy(size = self.position.size) if self.dataclose[0] &gt; self.BBands.top: self.log(&#39;Sell Created, %."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Projects",
      "item": "https://fahnestockj.com/projects/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "Algorithimic Stock Trader",
      "item": "https://fahnestockj.com/projects/stonks/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Algorithimic Stock Trader",
  "name": "Algorithimic Stock Trader",
  "description": "A Flawless Mean Reversion Strategy ðŸš€ Key Indicators ADX - Average Directional Index Used to determine a time window to trade BBands - Bollinger Bands Used to catch overextensions (positive or negative) inside a time window\nif self.SlowADX \u0026gt; self.FastADX: self.log('TRADENOWWEEWWOOOO') if self.dataclose[0] \u0026lt; self.BBands.bot: self.log('Buy Create, %.2f' %self.dataclose[0]) self.buy() if self.position.size \u0026lt; 0: self.buy(size = abs(self.position.size)) self.log('Short closed: %.2f' %self.dataclose[0]) self.buy(size = self.position.size) if self.dataclose[0] \u0026gt; self.BBands.top: self.log('Sell Created, %.",
  "keywords": [
    
  ],
  "articleBody": "A Flawless Mean Reversion Strategy ðŸš€ Key Indicators ADX - Average Directional Index Used to determine a time window to trade BBands - Bollinger Bands Used to catch overextensions (positive or negative) inside a time window\nif self.SlowADX \u003e self.FastADX: self.log('TRADENOWWEEWWOOOO') if self.dataclose[0] \u003c self.BBands.bot: self.log('Buy Create, %.2f' %self.dataclose[0]) self.buy() if self.position.size \u003c 0: self.buy(size = abs(self.position.size)) self.log('Short closed: %.2f' %self.dataclose[0]) self.buy(size = self.position.size) if self.dataclose[0] \u003e self.BBands.top: self.log('Sell Created, %.2f' % self.dataclose[0]) if self.position.size \u003e 0: self.sell(size = abs(self.position.size)) The strategy uses ADX a trend strength indicator to determine a window to trade then uses bollinger bands to catch a large change with the hope that a reversal occurs and the stock trends back to the mean. Mean reversion strategies work best when taking advantage of all the opportunities to trade which includes shorting from an overextension in the stock price. Unfortunately shorting requires a sizeable brokerage account to cover the risked leverage. This is for good reason as this strategy consistently loses money when exposed to the risks of shorting ðŸ¤«.\nBacktrader Framework and the Struggle to Acquire Data Used the Backtrader framework with Python to back test the strategy on historical data. The data was surprisingly difficult to get a hold of. Originally planned to use the Alpaca Trading Brokerage who was supplying historical data access from Polygon.io. Unfortunately, Polygon realized they were missing out on many potential customers and pulled the access to their data. The only way to get data from Polygon without paying their ~$100 a month~ subscription fee was to limit to 5 API calls a minute. This project has seen some heavy reworking and will be posted about more soon!\n",
  "wordCount" : "278",
  "inLanguage": "en",
  "datePublished": "2021-05-13T12:19:53-04:00",
  "dateModified": "2021-05-13T12:19:53-04:00",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://fahnestockj.com/projects/stonks/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Fahnestockj",
    "logo": {
      "@type": "ImageObject",
      "url": "https://fahnestockj.com/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://fahnestockj.com" accesskey="h" title="Fahnestockj (Alt + H)">Fahnestockj</a>
            <span class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://fahnestockj.com/posts" title="Posts">
                    <span>Posts</span>
                </a>
            </li>
            <li>
                <a href="https://fahnestockj.com/projects" title="Projects">
                    <span>Projects</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://fahnestockj.com">Home</a>&nbsp;Â»&nbsp;<a href="https://fahnestockj.com/projects/">Projects</a></div>
    <h1 class="post-title">
      Algorithimic Stock Trader
    </h1>
    <div class="post-meta"><span title='2021-05-13 12:19:53 -0400 EDT'>May 13, 2021</span>&nbsp;Â·&nbsp;2 min

</div>
  </header> 
  <div class="post-content"><h3 id="a-flawless-mean-reversion-strategy-">A Flawless Mean Reversion Strategy ðŸš€<a hidden class="anchor" aria-hidden="true" href="#a-flawless-mean-reversion-strategy-">#</a></h3>
<h4 id="key-indicators">Key Indicators<a hidden class="anchor" aria-hidden="true" href="#key-indicators">#</a></h4>
<ul>
<li><a href="https://www.investopedia.com/articles/trading/07/adx-trend-indicator.asp">ADX</a> - Average Directional Index
<ul>
<li>Used to determine a time window to trade</li>
</ul>
</li>
<li><a href="https://www.investopedia.com/terms/b/bollingerbands.asp">BBands</a> - Bollinger Bands
<ul>
<li>
<p>Used to catch overextensions (positive or negative) inside a time window</p>
<pre><code>  if self.SlowADX &gt; self.FastADX:
    self.log('TRADENOWWEEWWOOOO')
    if self.dataclose[0] &lt; self.BBands.bot:

        self.log('Buy Create, %.2f' %self.dataclose[0])
        self.buy()
        if self.position.size &lt; 0:
            self.buy(size = abs(self.position.size))
            self.log('Short closed: %.2f' %self.dataclose[0])
            self.buy(size = self.position.size)


    if self.dataclose[0] &gt; self.BBands.top:
        self.log('Sell Created, %.2f' % self.dataclose[0])
        if self.position.size &gt; 0:
            self.sell(size = abs(self.position.size))
</code></pre>
</li>
</ul>
</li>
</ul>
<p>The strategy uses ADX a trend strength indicator to determine a window to trade then uses bollinger bands to catch a large change with the hope that a reversal occurs and the stock trends back to the mean. Mean reversion strategies work best when taking advantage of all the opportunities to trade which includes shorting from an overextension in the stock price. Unfortunately shorting requires a sizeable brokerage account to cover the risked leverage. This is for good reason as this strategy consistently loses money when exposed to the risks of shorting ðŸ¤«.</p>
<h3 id="backtrader-framework-and-the-struggle-to-acquire-data">Backtrader Framework and the Struggle to Acquire Data<a hidden class="anchor" aria-hidden="true" href="#backtrader-framework-and-the-struggle-to-acquire-data">#</a></h3>
<p>Used the Backtrader framework with Python to back test the strategy on historical data. The data was surprisingly difficult to get a hold of. Originally planned to use the Alpaca Trading Brokerage who was supplying historical data access from Polygon.io. Unfortunately, Polygon realized they were missing out on many potential customers and pulled the access to their data. The only way to get data from Polygon without paying their ~$100 a month~ subscription fee was to limit to 5 API calls a minute. This project has seen some heavy reworking and will be posted about more soon!</p>


  </div>

  <footer class="post-footer">

  </footer>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="https://fahnestockj.com">Fahnestockj</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';

        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
